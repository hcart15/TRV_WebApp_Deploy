{% extends "base.html" %}

{% block content %}
<h1>Risk Assessment</h1>

<form method="POST">
    <label for="property_type">Select Property Type:</label>
    <select name="property_type" id="property_type" class="form-control">
        {% for property in property_types %}
        <option value="{{ property }}" {% if property == selected_property %}selected{% endif %}>
            {{ property }}
        </option>
        {% endfor %}
    </select>

    <label for="community">Select a Community:</label>
    <select name="community" id="community" class="form-control">
        {% for community in communities %}
        <option value="{{ community }}" {% if community == selected_community %}selected{% endif %}>
            {{ community }}
        </option>
        {% endfor %}
    </select>

    <button type="submit" class="btn btn-primary mt-2">Calculate Risk</button>
</form>

{% if risk_score is not none and consequence is not none %}
<div class="alert alert-info mt-3">
    <p><strong>Likelihood Score:</strong> {{ risk_score }}</p>
    <p><strong>Consequence Score:</strong> {{ consequence }}</p>
</div>
{% endif %}

{% if plot_url %}
<div class="graph-container mt-3">
    <img src="{{ plot_url }}" alt="Risk Assessment Plot">
</div>
{% endif %}

<script>
    // Ensure dropdown selection persists
    document.getElementById("property_type").value = "{{ selected_property }}";
    document.getElementById("community").value = "{{ selected_community }}";
</script>

{% endblock %}

